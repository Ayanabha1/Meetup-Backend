import{j as e,r as a,a as z,b as O,u as ne,L as oe}from"./index-c52b4654.js";import{l as le}from"./logo-a58ef9dd.js";import{A as C,b as ae,p as F,u as re,c as ce,d as ie,a as de,e as R}from"./commSettings-47c54f33.js";const xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cHBhUOMhxnH8MAAAEbSURBVFjD7ZcxjsIwEEUNhSu4BRRcAUFPx31ygCTcBU4R0dDScACSEgmJlnlbjBA22qyyZG0hrX8VufnP82fkiTFJxhjEWthsoGkIrrqGskSsfQJQluGNX1UUDkBd6+F8Hr7ai8WjEg6AKlrkjt8wlmmbEsBnA8B+33/cqqpHBUT637HDdKUxbCft0gM/Z9wLoFsP/EF0qQcSwAcANI0xuiyENkSWS/3yFpKi+M2cw2AAWYbcbm8/EZLnDpW1CvFYzXz5NxiNYLt9/3E6n5E895bS1nK9ACCTCRyPenq9wnodNi8HAFYruFz05HSC2SyouQsAWQb3u2a32yHjcXBzHwBARP8fhvFG92keIe/vAaoKDgdkOo1u/m/0BSbW5HbUkYsSAAAAAElFTkSuQmCC",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAgCAYAAAD9oDOIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIXSURBVEhL7dbNi05RHMDxO3cQJZJYUCbJZhYkLMwfQCkvZZKFjZeSFRYoWQjF1tgRZaPEgjTkrSwoycaGhaQGiTJsvL+M7/f0O+OamTvP0/TYzWfz6/zOy3PuOfc55xaj6cIFvMF39OEMOhFNmteG4xgIP9GPKA78wE5E8+bsh50/YgemwvxMHMA3/EY3UodG5uAzvmAZIv2P9fBHX2MyIl1vN+xwEpEa0TXYbg0iNaiMOGgRjDeREjVuwLgYKVExbNBpMH5AStRw44zTkRIVwwZthfFBW2980NYrD+MQojxmJc5iK8rtOIgJsPIrjI1Onykw5vYd2IJtKN+hHbNh5QsYl8JYJx+Lz2GcC+NbFOfhEZYPXAez/AozYG6oBfDMdZZ5MvtgvyMoNsPCJaQeuAhzDzAfkU6W4BmsPwZzXj+PYG4FCq8Kl+AX8iN7/D2EjbzwbuMc7sF25q8g78MGmHsMN8xcsQcmnyCfj27EUXiuWpd5s3o75M7z4DpatxbmEhvcghX3kddJE7EcK+EpnwfTQjyF/U4h0n95U+ZHfgnXujpA1STsQn6Kq6i+gm0RE9f3NDbBsrdlL5yN18csONvVcBJe0z3YC78N0iB1VuEO7ORMhvJj4jJclujSPDdhI+7CwXzt1qG65mPmW+Cg/qUjNar/ckqN6DrcmMxPIGf6CZHqf48TiC6N+a46SCP+naNLRVH8AU3hGYaySIfTAAAAAElFTkSuQmCC",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cHBhQMHYRCKi8AAAPDSURBVFjDxVdNSFRRFP7O/GUzYijYJjD6gUowhoLAZQubyhlhggmZRb/QJpJauDM0opWhIO5bVGBFRWBRgQZBC0FCijZJRTAhkzop0/RCnfu1OI1PmxmdNyodGN57937nnO9+995z7wD/2aQcJ7K6GojFgIYGbXj3DvLggcjMzIYzJltbyR8/mGepFHny5AYnj0bJbJZcWCD7+2nCYZpIhOzv17ZslmxpKex78SJ56xYpZakOsqKC/PaNNIZsbs7rN+Gw9iUSNJs2Le9rb1eVJiZofL4yCTQ3a5CBgeKYu3cVc+yY3Xb5srZNT5PB4L8+rtIp7N2rz9evi2OGhvS5b19OdqCnB5iZAUMhkbGx8glw82Z9SaWKg379UqzfT547B/T1Aek0ePSouEZHC3l4SlfAgUk0CgSDSuj4cXGNjBSDOpgCJ3bgAPD7N9DSIvLmzUrIdSZQV6dPywIiEZFXr1bzKEqAPHuWbGwsNTVNLAbcuKFfPT0iw8Map7GRPHPG0TjIQECLigbRBB0dup1aW/Px0Sg5N7dYFE1Hh903PKyxAoHSFaDHA7hcwOpFgyYSAQYGABK4cycf4fMBLpfGdDAFpcl+5Ajk/n3A7QZOnQKePnUaowgBywJI0O9fbJK/exzV1Zq8qQny5Ang8QDxuMi9e2BlpWIzGZtlIKDqWJaz0XFqikwm7dGGQjrBjx6Rhw+TmYweQPG4jXn4UNdAU5PdNjlJfv9ehrwvX2rC+nr99nrJr1/1wMlkdGGdPm0Tjsc1+adPNF6v+uzfrzGeP3c4BQAwOKiRz58HAHHNzwO9vYAI4PcDHz4A6bTugNu3dQEuLEAuXFAsAOQIOl8boKmqIqenaX7+JHftojl0iJydVQWSyfwLSSJBEwrZiuzcSVoWOTVFU1XlmICSaGvT4O/f6y3IGPLSJRqfjzxxguzsJK9fp4nFuHhYATSVleTYmE5JW1tZyXUUIjTPntmjzFW6lUjX1dG8fav4x4/LvgFpsIYGXcU5S6fJri5y27Z87Pbt5LVrisntloqKNYy+vt6e66tX9VqVydhkPn4kX7ygGRrS96Ukr1wh3e41JN+zh5yY0IBdXfYoa2v1TBgdXVb7aVnkyAhNezvN1q1lJ9Yku3eTicRqc07j9dJMTurPsz4XGy02nz/r6u3uXl2pZHJptVw7Abrd5ODgUtk3msAy6USyWSAczk+0YwdQU1PA3aP9Bw/m96VSIl++rIMqwaAWIKdmTKH/ASsqUNjGx8GbNyFbtjhjPjsLGR9fswIbbX8Aq+5LaRDrUJYAAAAASUVORK5CYII=",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEQSURBVFiF7dbNLgNRGMbx9wi668KKkHATXBNbC3YNupJwAcK9uAKxsqlFgxBhqaSRyM+iIxlJU8N0QnT+y5NnzvO8cz7eE1FTM/GggQPcKE8HLcwU9U84jIjNiOhHxF3JehYjohERrZRSu9AXuMcz5kuaB5bxis4ITRMbOMNpZL+uW9Y8Z/CA3pDxNZygl1+zSgPkqj3PeT7hGI9VBnjBUWb2wQW2MZfpulUF6A+pdnWIrrIAb9mc62iO0FUboICuC1PjMv4pdYDKAny1CfPCf3cMf/0i+hNX8bea0a1BO14Yg/mKQTu+HKH51I4T9iNiK8bzIFmKiNmI2Ekp7RZN3UAb18pzhT1MlyykpmaCeAenJJm9Y9ALgwAAAABJRU5ErkJggg==",ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cHBhQNLMyHG1QAAALzSURBVFjD3Vc/LLtRFD3vqzSViFQkIpHQMHSgpBIDiSAIwmolIRJDKwakFgkTujQMbOLPJGoTi5DWaEGDSWJALE0ZUG298xueaGnpn59U4i5fvvfuu+fcc9979/uAv2ak0UjZ0UEK8QvgmkZ6PCRJ2d7+CwQcDpIkr69JozHL4FYr+fJCSkl2dWUZ3GAgT09V9i5XVsEVgYUFBX5+TubmZhhE08jRUfLsjIxEmNTu7ymrqki7/X1IXl5SjoxkdAIonc7koLEWCJD19eTdXfzc7Gya2RcXk6+vZDBIdnaSOl1qpDc3FaDXS6nXU/b0qI0YiVAWFSXGMpsp29o+DXZ1qUA7O6kr1ten1jw8kCZTNNburhpXJ4EsLycHBsj1dfLmJlouRSJHrcrLgwDAx8fUFDOZgMVF9WK3C+3qKjr59KRiTUyQS0tAWdnn1YAQQEEBAGhp1QqAKs/aGpCfD2xtCW1t7YODqK5Wz+ZmBe73g9vbgM0GVFYCbnese066BIDxcaCxEbi5AYaH4+cNBsV0bw8YG4Pw+YQmZbR0JGLOSFoESKsVmJ5WMg4NCeH3f+3t8wnt5CRZzJRLQBoMwOoqoNcDCwtC7O6mr95/EADm5wGLBbi4ACYnfwI8ZQKqtdpsQDgM9vcL8fycNQJkYSHEyoo6OlNTQjs6Si20xUJZU0Nq32KksAmXl4GSEuDwEHA6k/sHgwAA0dYGHB8Dfj+lxwOxvw8cHKhE4iTu7VW30+bmx/HEt923ikm3W8U6OCCvruL7hJTq0dsbLYEIhdTyvLyo9CYTRMxtJ2Juu2/trR0Ll0sIkwmoqAAGB4GNDeD2NqpAIIBYMMUsGCRra0mdjvR6E6nyZebU6cju7mgzKi1N7Gc2k62tcS2bXFxUEs3MvMuYsc3NpaZWXAYtLWRDAxkOpw8aiZA+n/pA0dLuMW8k/sK3Xcbgsr1dbcRQiLKuLsuZG43qZ4IkHY6sgisCTU0K3OPJeAP9CAmZn/8r4L9p/wA9gf68xQQy0AAAAABJRU5ErkJggg==",fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cHBhQQD5GMBjoAAAFdSURBVFjD7VdLcoJAFOzBHABFOQfurXIvG4oq9nIzT+HOFR6AFXAGPwwXYDoLElH5xUhSqUivBnivXzNdFD3Aq0Pc36CaTgHLAsbj28o8B/d7oR0ObYRUpgmxWICj0e0TKYEwFNrp1NxMxyGlZBNUHHe9EZkkjf2UknSchkbDaB1OkoyiTgEqjts5pCQN47P+reyczyF0vbjYbMDttmpBEHS7ulwCNRaI1QpYrwFdLyze7e6Ue1651Z7XPegxNPFrfQ96FIOAUoDI89p1X+jipzLN4hOKIqrZrO/5P80/YMCAfwAq0yzCRJJQmeav85OuW4YG1+1dQAN/+S+4DhCVPNeHgnr+P/Q3fFUBZSiFlJelsG2qu8pnzwXCtst1mlYbvxLLnz4XVGP5xQIhzmfA94Esa2QXZOeesq0mywDfL2Z9UNbtBGBZ4GRStSAIhHY8fs+CNAXC8Hr4AAB4B6h7nQautm+cAAAAAElFTkSuQmCC",pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cHBhQUG+86F0MAAALDSURBVFjD7VXNK/RRFH4O0xjCyFfyFYuJMdkgyQILURYKG/4Bq1GksBQ7G+SfsJCFrEgklO+JFWFsxORrzCSmMfd5F7d5x8cP88bunWdz+93znHPPec753QvEEEMM/zskWiKVyQTY7ZCKCsBmA9LSAKsVIAGvF/B6weNjyN4ecHQkEgr9ODuq5GSys5OcmSEfHxk1fD5yeprs6CATE/9ZATIjA+jtBZxOXaneBU5Pwf19yOEheH+vKxeBpKUB6elAeTlQUQEUF0ei3d4Ck5PA1JSI1/t1xRShcjpJvz9Szdoa2dND5uVFr1xhIdnfT25tReI8PJDd3d84jo1pslLk/DxZU/PjNrK+nmphIZLIyMgnxJYWTQgEyPb27wNbLFQFBbrar/us+V1dZDCo62tsNCCE5errMw5gt5MDA1SLi6TXazh4ammJHBoiHQ7jGIODmrux8c6Ql6dlf3igSkj42Jr8fK3M+0k/Pyfdbt3f1wgGqWy2jwkkJur5UorMzQWAOG1xOAARYHdX4gKBj7kHg4DZDIRCQFsbmJMjkpoqUlQkUlwsYrWC2dlgayvw/AyYTDC4B0SenoDtbUAELCuLJCAWi6b4/UbSSZzHA3g8QHw8uL6uv99zrq+BlRXAYgF8PsDtNp4Gn087JCVFEsDFhV5LS417l54OpKQASgFGCoWzCIWAlxfAbAazsgw5LCnR6+XlqwPi48mbG92/2lq9Z7GQDQ3k8DDVyYm2zc3hG5Czs5p7dqZ96+qozGY9S9XV2nZ3p6/2N47Dw9ro8ZDr6+TT09vB2tmh+qSq13FUZubbC4gkHx+plpfJqyv9PTpqkHlSkv7FwgiFSJeLHB+nam4mJfqHiyJUTU3kxAR5cKCnPozVVark5L9de+8IVlZCrFbA5RK5vY320K9VycqCVFXpt2NzU0Sp34gbQwwxxPAr+AOafXFobMli6AAAAABJRU5ErkJggg==",be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cHCBMPOAH7zB0AAAPeSURBVFjD5VdNSFRRFP6ujeNPRUqaOebCAicldF2QpkhBP0gE1UaCJHcGhZvAIKggCKGFuHETLUKodD1oTQyualELGWhKKs0ZGTGTSu2p92txZub1nPfezGg77+bBO+d833fOeffc+4DtvlQuzuTOncCpU0BTE1BVBVRWAiQYi0HNzADBIDA2ptTS0n9VSfr95NAQubzMjGtpiXzyhKyp2XIFyKIioK8PuHYN8Hjk7c+f4Ogo1MePwOysOPp8UH4/0NYGFBeLn2GA/f3ArVsqzzA2kXVVFfXbt2Zm79+T7e3UBQVugsmLF8lw2IwLhajLy3Mk9/nI6WkBWFkhu7rIvLys47XHQ964Qa6ukiT1p0/UZWVZkhcVkW/eCHk8Th49mnP5UlitreT374L1+jV1fn4WQQMDZuabJzer0daWqgQfPMjgXFtrOnd1bZXcxO3pEczlZerqapfsnz6Vnr17t7Hn5JUrZCBA+v3ORA0N1C9fkpcvW9/n55ORiGAPDjoE79olZSfJ9vZ0++io2KJROxHUjY3Uc3PiMzycbu/oENviIrXXa5P9+fNuDuThw2QsZifCSv71q90QsiSoT560EfDokQA8f+7cIr+fnJkRv9lZsr7eSj41RR465NyiZBXv30+++6fPBw6IVyTiBKDUhw9AaysQjQIVFUAoBBUMQpWVAdPTQEuLUpOTcARIYvt8NgIqK+WZGK8ZRczNAXv3AqWlEpOBHAAYi1m5LALW1xMMmU9IFhaaZwMAejyA84g21Sd2FrVOF8Bk5qY6W27d2AiMjUnmsRgQj0sLXr0i6+vdFSSxk5WwVODbN3m67fMEearnx4/L3SD5TWQSkcBW0agN+NmzskV+/SILC9PtDQ3WrXbwYMrGujrLFtW1tenxe/aQhiE+LS3pAlhcLJcJkrxwId0eCNiR24t49izdfvWq2BYWHA8l8vFjcZqYIHfssNouXaJ+8cLtpiPDamSE+tw5a/YFBeTnz4I9MABngJoa8s8fcezuxn9a1L29ZnvdP3JQ9/WJAMMgm5u3TM7Tp8m1NcG8cycLtV4vGQpJwPy87QeTNfmZM+TiomAFAhvb6iJi3z7qyUkJXF0lb96k/mfwZJXE7dvk+rpghMNkaWlu6nV5uVkJkoxEqDs6qHfvds64pITs7CS/fDHjAgE3cvdrufZ6oe7eBa5fB5KzwTDA8XGocBiIxwGlZAgdOQIcO5Ya0fz9G+rhQ+DePaUSY37TvdTV1dSDg+SPH5l/TObnyf5+cv/+bLBz+zXTXi/Q1AR14oQc3xUVgNZSiakpIBgEx8dV3traljLeVusv57GknXgOexQAAAAASUVORK5CYII=",he=({tracks:r,participants:o,memberDetails:c,name:b})=>{const h=m=>{const i=c==null?void 0:c.filter(f=>f.uid===m)[0];return i==null?void 0:i.name};return e.jsxs("div",{className:"flex justify-center flex-wrap gap-[30px] h-[95%] w-[100%] overflow-hidden mr-[10px]",children:[o==null?void 0:o.map(m=>m.videoTrack?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-w-[150px] max-w-[470px] sm:w-[48%] object-contain rounded-[7px] overflow-hidden relative",children:[e.jsx(C,{videoTrack:m.videoTrack,className:"h-full w-full"},m.uid),c.mic__muted&&e.jsx("img",{className:"absolute left-[10px] bottom-[10px] z-50 bg-[#FC5E5C] w-[30px] h-[30px] p-[5px] rounded-[50%]",src:v}),e.jsx("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)]  px-[12px] py-[2px] rounded-[8px]",children:h(m.uid)})]})}):e.jsxs("div",{className:"min-w-[150px] max-w-[470px] sm:w-[48%] object-contain flex justify-center items-center bg-black rounded-[7px] overflow-hidden relative",children:[e.jsx("img",{src:ae,className:"w-[25%] h-[25%] object-cover rounded-[50%]"}),c.mic__muted&&e.jsx("img",{className:"absolute left-[10px] bottom-[10px] z-50 bg-[#FC5E5C] w-[30px] h-[30px] p-[5px] rounded-[50%]",src:v}),e.jsx("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)]  px-[12px] py-[2px] rounded-[8px]",children:h(m.uid)})]})),r&&(r[1].muted?e.jsxs("div",{className:"min-w-[150px] max-w-[470px] sm:w-[48%] object-contain flex justify-center items-center bg-black rounded-[7px] overflow-hidden relative",children:[e.jsx("img",{src:F,className:"w-[25%] h-[25%] object-cover rounded-[50%]"}),r[0].muted&&e.jsx("img",{className:"absolute left-[10px] bottom-[10px] z-50 bg-[#FC5E5C] w-[30px] h-[30px] p-[5px] rounded-[50%]",src:v}),e.jsxs("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)]  px-[12px] py-[2px] rounded-[8px]",children:[b," (You)"]})]}):e.jsxs("div",{className:"min-w-[150px] max-w-[470px] sm:w-[48%] object-contain rounded-[7px] overflow-hidden relative",children:[e.jsx(C,{videoTrack:r[1],className:"h-full w-full"}),r[0].muted&&e.jsx("img",{className:"absolute left-[10px] bottom-[10px] z-50 bg-[#FC5E5C] w-[30px] h-[30px] p-[5px] rounded-[50%]",src:v}),e.jsxs("span",{className:"absolute right-[10px] bottom-[10px]  text-black font-semibold bg-[rgba(255,255,255,0.3)]  px-[12px] py-[2px] rounded-[8px]",children:[b," (You)"]})]}))]})},T=({videoTrack:r,videoMuted:o})=>!o&&r?e.jsx(C,{videoTrack:r,className:"h-full w-full"}):e.jsx("div",{className:"h-full w-full object-contain flex justify-center items-center overflow-hidden",children:e.jsx("img",{src:F,className:"w-[25%] h-[25%] object-cover rounded-[50%]"})}),we=({tracks:r,participants:o,memberDetails:c,name:b})=>{const[h,m]=a.useState(1),[i,f]=a.useState(null),d=x=>{const l=c==null?void 0:c.filter(w=>w.uid===x)[0];return l==null?void 0:l.name},u=x=>{f(x)};return a.useEffect(()=>{m(o.size),console.log(o.length)},[o]),e.jsxs("div",{className:"flex flex-col h-[95%] w-[100%] ",children:[e.jsx("div",{className:"meet-spotlight w-[100%] h-[70%] relative",children:i===null?e.jsxs(e.Fragment,{children:[e.jsx(T,{videoTrack:r&&r[1],videoMuted:r&&r[1].muted}),e.jsxs("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)] text-[12px] px-[5px] py-[2px] rounded-[5px]",children:[b," (You)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{videoTrack:i.videoTrack,videoMuted:!i.videoTrack}),e.jsx("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)] text-[12px] px-[5px] py-[2px] rounded-[5px]",children:d(i==null?void 0:i.uid)})]})}),e.jsxs("div",{className:"meet-others h-[30%] flex mt-[20px] overflow-scroll",children:[i!==null&&e.jsxs("div",{className:"h-[100%] min-w-[30%] max-w-[30%] mr-2 overflow-hidden rounded-[5px] relative",onClick:()=>u(null),children:[e.jsx(C,{videoTrack:r&&r[1],className:"h-full w-full"}),e.jsx("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)] text-[12px] px-[5px] py-[2px] rounded-[5px]",children:"You"})]}),o==null?void 0:o.map((x,l)=>i!==x&&e.jsxs("div",{className:"h-[100%] min-w-[30%] max-w-[30%] mr-2 overflow-hidden rounded-[5px] relative",onClick:()=>u(x),children:[e.jsx(C,{videoTrack:x.videoTrack,className:"h-full w-full"}),e.jsx("span",{className:"absolute right-[10px] bottom-[10px] text-black font-semibold bg-[rgba(255,255,255,0.3)] text-[12px] px-[5px] py-[2px] rounded-[5px]",children:d(x==null?void 0:x.uid)})]},l))]})]})},je=({tracks:r,participants:o,memberDetails:c,name:b})=>window.innerWidth>=500?e.jsx(he,{tracks:r,participants:o,memberDetails:c,name:b}):e.jsx(we,{tracks:r,participants:o,memberDetails:c,name:b}),Ne=({toggleChat:r,tracks:o,channelRef:c,uid:b})=>{const[h,m]=a.useState(!0),[i,f]=a.useState(!0),[d,u]=a.useState(""),x=z(),l=O();a.useEffect(()=>{u(l==null?void 0:l.roomId)},[l]);const w=async()=>{o[1].muted?(await o[1].setMuted(!1),f(!0)):(await o[1].setMuted(!0),f(!1))},M=async()=>{o[0].muted?(await o[0].setMuted(!1),m(!0)):(await o[0].setMuted(!0),m(!1))},p=async H=>{for(let S=0;S<o.length;S++)o[S].close(),o[S].stop();x("/")};return e.jsxs("div",{className:"flex-[0.05] flex justify-center relative",children:[e.jsxs("div",{className:"meetcode absolute left-0 bottom-[50%] translate-y-[50%] bg-[#2E3137] px-4 py-2 rounded-[8px] -z-10 hidden sm:block  sm:z-10 ",children:["Room Id : ",d]}),e.jsxs("div",{className:"flex w-[80%] items-center justify-center",children:[e.jsx("div",{className:`meet-control-icon ${!i&&"meet-control-icon-off"} `,onClick:()=>w(),children:e.jsx("img",{src:i?ue:ge})}),e.jsx("div",{className:`meet-control-icon ${!h&&"meet-control-icon-off"} `,onClick:()=>M(),children:e.jsx("img",{src:h?me:v})}),e.jsx("div",{className:"meet-control-icon meet-end-btn",onClick:()=>p(),children:e.jsx("img",{src:pe})}),e.jsx("div",{className:"meet-control-icon",children:e.jsx("img",{src:fe})}),e.jsx("div",{className:"meet-control-icon",onClick:()=>r(),children:e.jsx("img",{src:xe})})]})]})},Ue=()=>{const[r,o]=a.useState(!1),[c,b]=a.useState(""),[h,m]=a.useState(""),[i,f]=a.useState([]),d=re(),u=ce(),{ready:x,tracks:l}=ie(),[w,M]=a.useState(String(Math.floor(Math.random()*1e4))),{state:p,startLoading:H,stopLoading:S,showError:Z,showSuccess:Se,showInfo:P}=ne(),L=z();let j=a.useRef();const[V,G]=a.useState([]),[U,E]=a.useState([]),[B,Q]=a.useState(""),[K,X]=a.useState(0),y=O();a.useEffect(()=>{m(y==null?void 0:y.roomId)},[y]),a.useEffect(()=>{var A;p.loggedIn&&b((A=p==null?void 0:p.userData)==null?void 0:A.name)},[p.loggedIn]);const J=()=>{const A=new Date,t=A.getHours(),n=A.getMinutes();A.getSeconds();let s=t%12;s===0&&(s=12);const g=t>=12?"PM":"AM";return`${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")} ${g}`},q=()=>{const A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=new Date,n=t.getDate(),s=t.getMonth(),g=t.getFullYear();return`${n} ${A[s]}, ${g}`},[I,W]=a.useState(!1),Y=()=>{W(!I)},$=A=>{const t=Math.floor(A/3600),n=Math.floor(A%3600/60),s=A%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};a.useEffect(()=>{const A=new Date,t=setInterval(()=>{const s=Math.floor((new Date-A)/1e3);X(s)},1e3);return()=>clearInterval(t)},[]);const _=async A=>{console.log("New member : "+A);let{name:t,uid:n}=await u.getUserAttributesByKeys(A,["name","uid"]);G(s=>[...s,{name:t,uid:n}])},D=async A=>{try{const{name:t,uid:n}=await u.getUserAttributesByKeys(A,["name","uid"]);console.log("Member left ... :("+t),P(`${t} left the call`)}catch(t){console.log(t)}},ee=async A=>{const{name:t,uid:n}=await u.getUserAttributesByKeys(A,["name","uid"]);G(s=>[...s,{name:t,uid:n,mic__muted:!1}])},Ae=async()=>{var t;let A=await((t=j.current)==null?void 0:t.getMembers());for(let n=0;n<A.length;n++)ee(A[n])},se=async(A,t)=>{console.log("Message Recieved");let n=JSON.parse(A.text);n.type==="chat"&&(console.log(n),E(s=>[...s,n]))},te=A=>{if(A.preventDefault(),B==="")return;let t=B;t=t.trim();const n={type:"chat",name:c,uid:w,time:J(),picture:"",message:t};E(s=>[...s,n]),j.current.sendMessage({text:JSON.stringify(n)}),Q("")};return a.useEffect(()=>{let A=async n=>{try{await u.login({uid:w}),await u.addOrUpdateLocalUserAttributes({name:c,uid:w});let s=await u.createChannel(n);j.current=s,await j.current.join(),j.current.on("MemberJoined",_),j.current.on("MemberLeft",D),j.current.on("ChannelMessage",se),Ae()}catch(s){console.log(s)}d.on("user-published",async(s,g)=>{await d.subscribe(s,g),g==="video"&&(i.filter(N=>N.uid===s.uid)&&f(N=>N.filter(k=>k.uid!==s.uid)),f(N=>[...N,s])),g==="audio"&&s.audioTrack.play()}),d.on("user-unpublished",(s,g)=>{g==="audio"&&(s.audioTrack&&s.audioTrack.stop(),g==="video"&&f(N=>N.filter(k=>k.uid!==s.uid)))}),d.on("user-left",async s=>{await D(s.uid),f(g=>g.filter(N=>N.uid!==s.uid))});try{await(d==null?void 0:d.join(R.APP_ID,n,R.token,w))}catch(s){console.log(s)}l&&await d.publish([l[0],l[1]]),o(!0)},t;if(p.loggedIn||(t=setTimeout(()=>{p.loggedIn||(L("/"),Z("User is not logged in"))},1e3)),p.loggedIn&&h!==""&&c&&x&&l)try{A(h)}catch(n){console.log(n)}return()=>{var n;try{d.leave(),(n=j.current)==null||n.leave(),u.logout(),l&&(l[1].stop(),l[1].close(),l[0].stop(),l[0].close())}catch{}clearTimeout(t)}},[p,h,d,x,l]),e.jsx("div",{className:"meeting-dock bg-primary w-full h-full overflow-hidden",children:e.jsxs("div",{className:"flex flex-1 flex-col h-full",children:[e.jsxs("div",{className:"meet-top flex-[0.05] flex items-center",children:[e.jsx(oe,{to:"/",children:e.jsx("img",{src:le,alt:"meetup",className:"w-[90px] xs:w-[124px] xs:h-[45px]"})}),e.jsx("div",{className:"h-[80%] w-[1px] bg-dimWhite ml-5 mr-5"}),e.jsx("span",{className:"text-[14px] xs:text-[16px]",children:"Very Good Meeting"}),e.jsx("div",{className:"w-fit bg-[rgba(255,255,255,0.2)] px-3 py-1 ml-auto ss:ml-5 rounded-xl text-[14px] xs:text-[16px]",children:$(K)}),e.jsxs("span",{className:"ml-0 ss:ml-auto hidden ss:block ",children:[J()," | ",q()]})]}),e.jsxs("div",{className:"flex-[0.95] flex w-full h-[89%] relative",children:[e.jsxs("div",{className:`flex flex-col  ${I?"w-[100%] sm:w-[80%]":"w-[100%]"}`,children:[e.jsx("div",{className:"flex-[0.95] flex justify-center overflow-hidden ",children:e.jsx(je,{tracks:l,participants:i,rtc__client:d,memberDetails:V,name:c})}),e.jsx(Ne,{toggleChat:Y,tracks:l,channelRef:j,uid:w})]}),I&&e.jsxs("div",{className:"meet-sidebar w-full flex flex-col justify-between bg-[rgb(24,24,35,0.75)] backdrop-blur-[3px] sm:bg-[rgba(24,24,35,0.2)] rounded-[8px] sm:w-[400px] h-[100%] absolute sm:static",children:[e.jsxs("div",{className:"meet-sidebar-chat  flex-[0.88] overflow-y-scroll relative",children:[e.jsx("div",{className:"absolute right-5 top-3 block sm:hidden",onClick:()=>Y(),children:e.jsx("img",{src:be,className:"w-[25px]"})}),e.jsx("p",{className:"text-center my-3 mx-5 underline underline-offset-8",children:"Messages"}),U==null?void 0:U.map((A,t)=>(A==null?void 0:A.uid)===w?e.jsx("div",{className:"flex flex-col p-5",children:e.jsxs("div",{className:"flex flex-row-reverse",children:[e.jsx("img",{src:de,alt:"name",className:"w-[42px] h-[42px] object-cover rounded-[5px]"}),e.jsxs("div",{className:"flex flex-col w-full mr-4",children:[e.jsxs("div",{className:"flex flex-row-reverse justify-between",children:[e.jsx("span",{className:"text-dimWhite",children:"You"}),e.jsx("span",{className:"text-[rgb(131,132,138)]",children:A==null?void 0:A.time})]}),e.jsx("p",{className:"bg-[rgba(35,38,46,0.5)] sm:bg-[rgba(35,38,46,0.5)] rounded-[8px] rounded-tr-none my-3 p-3",children:A==null?void 0:A.message})]})]})},A==null?void 0:A.uid):e.jsx("div",{className:"flex flex-col p-5 ",children:e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:F,alt:"name",className:"w-[42px] h-[42px] object-cover rounded-[5px]"}),e.jsxs("div",{className:"flex flex-col w-full ml-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dimWhite",children:A==null?void 0:A.name}),e.jsx("span",{className:"text-[rgb(131,132,138)]",children:A==null?void 0:A.time})]}),e.jsx("p",{className:"bg-[rgba(35,38,46,0.5)] sm:bg-[rgba(35,38,46,0.5)] rounded-[8px] rounded-tl-none my-3 p-3",children:A==null?void 0:A.message})]})]})},t))]}),e.jsxs("form",{className:"flex-[0.1] px-5 w-full mt-3",onSubmit:A=>te(A),children:[e.jsx("input",{type:"text",placeholder:"Type a message...",className:" px-3 py-2 bg-[rgba(35,38,46,0.5)] sm:bg-[rgba(35,38,46,0.5)] rounded-[8px] rounded-tr-none rounded-br-none w-[80%]",value:B,onChange:A=>Q(A.target.value)}),e.jsx("button",{type:"submit",className:"px-3 py-2 bg-[rgb(0,209,205)] rounded-[8px] rounded-tl-none rounded-bl-none w-[20%] overflow-hidden",children:"Send"})]})]})]})]})})};export{Ue as default};
